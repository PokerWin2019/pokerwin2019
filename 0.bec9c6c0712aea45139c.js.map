{"version":3,"sources":["webpack:///src/components/PokerRoom.vue","webpack:///./src/components/PokerRoom.vue?fce3","webpack:///./src/components/PokerRoom.vue"],"names":["PokerRoom","name","components","ssnav","data","isShowMain","gameURL","isWH","created","window","pokerRoomParm","this","$alert","$t","confirmButtonText","beforeClose","action","instance","done","history","back","setTimeout","top","location","reload","beforeDestroy","selfInfoSInt","clearInterval","beforeRouteLeave","to","from","next","that","frames","Game","prototype","preGameInfo","tronAppInt","getQGameState","roomID2GameID","rID","gID","then","res","preData","winnerIdx","getWinnerFrom","room","chips","occupants","id","tronWeb","defaultAddress","hex","_done","getQcGameParmFromEndGameInfo","parmGameInfo","_this","submitQGameResultHelper","$message","type","message","console","log","href","indexOf","catch","e","beforeRouteUpdate","mounted","document","getElementById","width","body","clientWidth","height","clientHeight","roomID","$route","query","pokerEnvironment","methods","components_PokerRoom","render","_h","$createElement","_c","_self","staticClass","attrs","isShowLogo","_v","src","frameborder","scrolling","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/0.bec9c6c0712aea45139c.js","sourcesContent":["<style lang=\"scss\" scoped>\n.mainRunner {\n  width: 100%;\n  height: 100vh;\n  -webkit-overflow-scrolling: touch;\n}\n.frameClass {\n  min-width: 100px;\n}\n.frameWHClass {\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n<template>\n  <section class=\"mainRunner\">\n    <ssnav :isShowLogo=\"false\"></ssnav>\n    <iframe\n      v-if=\"isShowMain\"\n      name=\"mainscene\"\n      width=\"100%\"\n      height=\"80%\"\n      id=\"mainscene\"\n      :src=\"gameURL\"\n      frameborder=\"0\"\n      scrolling=\"no\"\n      class=\"['frameClass',isWH:'frameWHClass':'']\"\n    ></iframe>\n  </section>\n</template>\n<style lang=\"scss\" scoped>\n</style>\n<script>\nimport Nav from \"@/components/Nav\";\nexport default {\n  name: \"PokerRoom\",\n  components: {\n    ssnav: Nav\n  },\n  data() {\n    return {\n      //iframeWidth:\"100%\",\n      //iframeHeight:\"80%\",\n      isShowMain: true,\n      gameURL: \"\",\n      isWH: false\n    };\n  },\n  created() {\n    const that = this;\n    if (!window.pokerRoomParm) {\n      this.$alert(`${this.$t(\"RoomPage.backTip\")}`, {\n        confirmButtonText: `${this.$t(\"RoomPage.confirmBtn\")}`,\n        beforeClose: (action, instance, done) => {\n          if (action == \"confirm\") {\n             history.back()\n    setTimeout(function(){\n        top.window.location.reload()\n    },500)\n          }\n          done();\n        }\n      });\n    }\n  },\n  beforeDestroy() {\n    if (this.selfInfoSInt) {\n      window.clearInterval(this.selfInfoSInt);\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    \n    const that = this;\n    if (top.frames[\"mainscene\"].Game.prototype.preGameInfo) {\n      top.window.tronAppInt\n        .getQGameState(\n          top.window.tronAppInt.roomID2GameID(\n            top.frames[\"mainscene\"].Game.prototype.preGameInfo.rID,\n            top.frames[\"mainscene\"].Game.prototype.preGameInfo.gID\n          )\n        )\n        .then(function(res) {\n          if (res != 4) {\n            if (top.frames[\"mainscene\"].Game.prototype.preGameInfo.preData) {\n              let winnerIdx = tronAppInt.getWinnerFrom(\n                top.frames[\"mainscene\"].Game.prototype.preGameInfo.preData.room\n                  .chips\n              );\n              if (\n                top.frames[\"mainscene\"].Game.prototype.preGameInfo.preData.room\n                  .occupants[winnerIdx].id ==\n                tronAppInt.tronWeb.defaultAddress.hex\n              ) {\n                that.$alert(`${this.$t(\"RoomPage.winnerTip\")}`, {\n                  beforeClose: (action, instance, done) => {\n                    const _done = done;\n                    if (action === \"confirm\") {\n                      tronAppInt\n                        .getQcGameParmFromEndGameInfo(\n                          top.frames[\"mainscene\"].Game.prototype.preGameInfo\n                            .preData\n                        )\n                        .then(function(parmGameInfo) {\n                          tronAppInt\n                            .submitQGameResultHelper(parmGameInfo)\n                            .then(res => {\n                              if (res) {\n                                that.$message({\n                                  type: \"success\",\n                                  message: `${this.$t(\"RoomPage.successTip\")}`\n                                });\n                                console.log(\n                                  \"有获胜游戏，未提交结果,处理了未提交内容\"\n                                );\n                                _done();\n                                next(true);\n                              }\n                            });\n                        });\n                    }\n                  }\n                });\n              } else {\n                if(location.href.indexOf('?')>=0){\n                  that.$alert(`${this.$t(\"RoomPage.loserTip\")}`, {\n                  beforeClose: (action, instance, done) => {\n                    if (action == \"confirm\") {\n                      next(true);\n                    }\n                    done();\n                  }\n                });\n                }\n              }\n            } else {\n              if(location.href.indexOf('?')>=0){\n                that.$alert(`${this.$t(\"RoomPage.beforStartTip\")}`, {\n                beforeClose: (action, instance, done) => {\n                  if (action == \"confirm\") {\n                    next(true);\n                  }\n                  done();\n                }\n              });\n              }\n            }\n          } else {\n            next(true);\n          }\n        })\n        .catch(function(e) {\n          throw e;\n        });\n    } else {\n      if(location.href.indexOf('?')>=0){\n        that.$alert(`${this.$t(\"RoomPage.beforStartTip\")}`, {\n        beforeClose: (action, instance, done) => {\n          if (action == \"confirm\") {\n            next(true);\n          }\n          done();\n        }\n      });\n      }\n    }\n  },\n  beforeRouteUpdate() {\n    console.log(\"beforeRouteUpdate\");\n  },\n  mounted() {\n    document.getElementById(\"mainscene\").width = document.body.clientWidth;\n    document.getElementById(\"mainscene\").height =\n      document.body.clientHeight * 0.8;\n    const { roomID } = this.$route.query;\n    this.gameURL = window.pokerEnvironment().gameURL + \"?roomID=\" + roomID;\n  },\n  methods: {}\n};\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/PokerRoom.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"mainRunner\"},[_c('ssnav',{attrs:{\"isShowLogo\":false}}),_vm._v(\" \"),(_vm.isShowMain)?_c('iframe',{staticClass:\"['frameClass',isWH:'frameWHClass':'']\",attrs:{\"name\":\"mainscene\",\"width\":\"100%\",\"height\":\"80%\",\"id\":\"mainscene\",\"src\":_vm.gameURL,\"frameborder\":\"0\",\"scrolling\":\"no\"}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-86173430\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PokerRoom.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-86173430\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PokerRoom.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-86173430\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./PokerRoom.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PokerRoom.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PokerRoom.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-86173430\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PokerRoom.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-86173430\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PokerRoom.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}